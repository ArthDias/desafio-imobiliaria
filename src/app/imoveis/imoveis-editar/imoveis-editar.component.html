<div *ngIf="imovel" class="container mt-5">
  <h2>Editar imóvel</h2>
  <div [formGroup]="form" (ngSubmit)="onSubmit()" #f="ngForm">
    <div class="row">
      <div class="mb-3">
        <label for="nome" class="form-label">Nome</label>
        <input type="text" class="form-control" id="nome" [(ngModel)]="imovel.nome" name="nome" formControlName="nome">
      </div>
      <div class="mb-3">
        <label for="tipo" class="form-label">Tipo</label>
        <input type="text" class="form-control" id="tipo" [(ngModel)]="imovel.tipo" name="tipo" formControlName="tipo">
      </div>
      <div class="mb-3 col-md-6">
        <label for="valor" class="form-label">Valor</label>
        <input type="number" class="form-control" id="valor" [(ngModel)]="imovel.valor" name="valor"
          formControlName="valor">
      </div>
      <div class="mb-3 col-md-6">
        <label for="condominio" class="form-label">Condomínio</label>
        <input type="number" class="form-control" id="condominio" [(ngModel)]="imovel.condominio" name="condominio"
          formControlName="condominio">
      </div>
      <div class="mb-3 col-md-4">
        <label for="quartos" class="form-label">Quartos</label>
        <input type="number" class="form-control" id="quartos" [(ngModel)]="imovel.quartos" name="quartos"
          formControlName="quartos">
      </div>
      <div class="mb-3 col-md-4">
        <label for="banheiros" class="form-label">Banheiros</label>
        <input type="number" class="form-control" id="banheiros" [(ngModel)]="imovel.banheiros" name="banheiros"
          formControlName="banheiros">
      </div>
      <div class="mb-3  col-md-4">
        <label for="area" class="form-label">Área (m²)</label>
        <input type="number" class="form-control" id="area" [(ngModel)]="imovel.area" name="area"
          formControlName="area">
      </div>
      <div class="mb-3 col-md-4">
        <label for="mobiliado" class="form-label me-3">Mobiliado</label>
        <input type="checkbox" id="mobiliado" [(ngModel)]="imovel.mobiliado" name="mobiliado"
          formControlName="mobiliado">
      </div>
      <div class="mb-3 col-md-4">
        <label for="venda" class="form-label me-3">Venda</label>
        <input type="checkbox" id="venda" [disabled]="imovel.aluguel" [(ngModel)]="imovel.venda" name="venda"
          formControlName="venda">
      </div>
      <div class="mb-3 col-md-4">
        <label for="aluguel" class="form-label me-3">Aluguel</label>
        <input type="checkbox" [disabled]="imovel.venda" id="aluguel" [(ngModel)]="imovel.aluguel" name="aluguel"
          formControlName="aluguel">
      </div>
      <div class="mb-3">
        <label for="dataAnuncio" class="form-label">Data do Anúncio</label>
        <input type="date" class="form-control" id="dataAnuncio" [(ngModel)]="imovel.dataAnuncio" name="dataAnuncio"
          formControlName="dataAnuncio">
      </div>
    </div>
    <h3 class="mt-4">Endereço</h3>
    <div class="row">
      <div class="mb-3 col-md-3">
        <label for="cep" class="form-label">CEP</label>
        <input type="text" class="form-control" id="cep" [(ngModel)]="imovel.endereco.cep" name="cep"
          formControlName="cep" (ngModelChange)="onCepChange($event)">
      </div>
      <div class="mb-3 col-md-3">
        <label for="numero" class="form-label">Número</label>
        <input type="text" class="form-control" id="numero" [(ngModel)]="imovel.endereco.numero" name="numero"
          formControlName="numero">
      </div>
      <div class="mb-3 col-md-6">
        <label for="complemento" class="form-label">Complemento</label>
        <input type="text" class="form-control" id="complemento" [(ngModel)]="imovel.endereco.complemento"
          name="complemento">
      </div>
      <div class="mb-3 col-md-12">
        <label for="rua" class="form-label">Rua</label>
        <input type="text" class="form-control" id="rua" [(ngModel)]="imovel.endereco.rua" name="rua"
          formControlName="rua">
      </div>
      <div class="mb-3 col-md-5">
        <label for="bairro" class="form-label">Bairro</label>
        <input type="text" class="form-control" id="bairro" [(ngModel)]="imovel.endereco.bairro" name="bairro"
          formControlName="bairro">
      </div>
      <div class="mb-3 col-md-4">
        <label for="cidade" class="form-label">Cidade</label>
        <input type="text" class="form-control" id="cidade" [(ngModel)]="imovel.endereco.cidade" name="cidade"
          formControlName="cidade">
      </div>
      <div class="mb-3 col-md-3">
        <label for="uf" class="form-label">Estado</label>
        <input type="text" class="form-control" id="uf" [(ngModel)]="imovel.endereco.uf" name="uf" formControlName="uf">
      </div>
      <h3 class="mt-4">Proprietário</h3>
      <div class="mb-3">
        <label for="proprietarioNome" class="form-label">Nome do Proprietário</label>
        <input type="text" class="form-control" id="proprietarioNome" [(ngModel)]="imovel.proprietario.proprietarioNome"
          name="proprietarioNome" formControlName="proprietarioNome">
      </div>

      <div class="mb-3">
        <div *ngIf="this.imovel.imageUrl">
          <div>
            <label for="image" class="form-label"><strong>Imagem da Residencia</strong></label>
          </div>
          <div>
            <img [src]="url || imovel.imageUrl">
          </div>
        </div>
      </div>
    </div>
    <button type="submit" class="btn btn-primary mt-4 me-3 mb-5" (click)="onSubmit()">Salvar</button>
    <a routerLink="/imoveis" class="btn btn-secondary mt-4 mb-5">Cancelar</a>
  </div>
</div>
